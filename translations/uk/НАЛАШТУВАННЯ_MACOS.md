# Гайд налаштування для openplace (macOS)

Цей гайд допоможе вам підготувати ваш девайс з **macOS** до запуску **openplace**.

---

## Крок 1: Встановіть необхідні компоненти
Перевірте чи є у вас оці наступні компоненти на вашій системі:
- **Homebrew**
- **Node.js**
- **Git**

---

## Крок 2: Клонувати репозиторій
```bash
git clone --recurse-submodules https://github.com/openplaceteam/openplace
cd openplace
```

---

## Step 3: Встановити залежності
```bash
npm i && brew install mariadb caddy nss
```
Якщо brew автомтаично не стартував сервсі - виконайте це:
```bash
brew services start mariadb
brew services start caddy
```

---

## Крок 4: Конфігурація та створення бази даних

Запустіть скрипт безпечної інсталяції для MySQL:
```bash
sudo mysql_secure_installation
```

Дотримуйтесь вказівок:
1. Натисніть **Enter** для введення поточного пароля root.
2. Введіть **`n`**, коли з'явиться запит на перехід до аутентифікації unix_socket.
3. Введіть **`y`**, коли з'явиться запит на зміну пароля root.  
   ⚠️ **Не** використовуйте «password», як показано в цьому демо.
4. Введіть **`y`**, щоб видалити анонімних користувачів.
5. Виберіть, чи забороняти віддалений вхід root (**рекомендовано: y**).
6. Введіть **`y`**, щоб видалити тестову базу даних.
7. Введіть **`y`**, щоб перезавантажити конфігурацію.

Потім налаштуйте середовище:
```bash
cp .env.example .env
```
Оновіть у `.env` файлі ваш пароль від MySQL.

---

## Крок 5: Налаштування бази даних

Виконайте наступні Prisma команди:
```bash
npm run db:generate
npm run setup
```

---

## Крок 6: Запустити застосунок

Запустіть сервер розробки:
```bash
npm run dev
```

У іншому терміналі запустіть Caddy:
```bash
caddy run --config Caddyfile
```

---

## Примітки щодо SSL
OpenPlace **потребує HTTPS**.  
Якщо ви тестуєте локально, ви можете отримати доступ до програми за адресою:
```
https://{IP}:8080
```
⚠️ Спроба використання HTTP призведе до **помилки HTTP 400**.

---

## Оновлення бази даних
Якщо схема бази даних змінюється, оновіть її за допомогою:
```bash
npm run db:push
```
